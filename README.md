# WhaleUtils

Whale is an enormous sea creatures, as its name suggests, it has lots of utility codes provided, aiming at Android Development and Jetpack Compose.

# Get Started

## Add JitPack repository

In your root `build.gradle`

```groovy
pluginManagement {
    repositories {
        ...
        maven { url 'https://jitpack.io' }
    }
}
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        ...
        maven { url 'https://jitpack.io' }
    }
}
```

## Add dependency and module

In your module `build.gradle`

```kotlin
implementation("com.github.BlueWhaleYT:<MODUE_NAME>:<MODULE_VERSION>")
```

WhaleUtils basically has two types of utility codes:

- Utils
- Extension

## Quick notes for Java developers

To access the extensions provided by this library, you are required to integrate Kotlin to your Java projects.

```groovy
// build.gradle (root)
buildscript {
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.7.10"
    }
}
```

```groovy
// build.gradle (module e.g. app)
plugins {
    // ...
    id 'kotlin-android'
    id 'org.jetbrains.kotlin.jvm'
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib:1.4.30"
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4'
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.6.4'
}
```

### Extension

Extension is mainly designated for Kotlin, however, Java can also use it after completing the Kotlin integration.
Here's an example of using `getFileContent()` extension function from `FileExtKt`.

```kotlin
// Kotlin
val content = filePath.getFileContent()
edittext.text = content
```

```java
// Java
String content = FileExtKt.getFileContent(filePath);
edittext.setText(content);
```

> Note: `FileExtKt` class is automatically generated by Kotlin compiling plugins.

### Companion

If you check the API documentation, you will see there is `object Companion` from Kotlin. For example:

```kotlin
fun isNetworkConnected(context: Context): Boolean
```

To use it in Java, you need to add `Companion` like below.

```java
// Java
if (NetworkUtils.Companion.isNetworkConnected()) {
    // ...
}
```

### Optional Parameters

In Kotlin, optional parameters in functions are supported, they are the default value of arguments. For example:

```java
// Java
Cursor cursor = SAFExtKt.getCursor(uri, this, null, null, null, null);
```

```kotlin
// Kotlin
val cursor = uri.getCursor(this)
```

# Modules

- common
- file-management

## file-management

Make sure you have permissions set to application

```xml
<!-- optional for SAF -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.MANAGE_EXTERNAL_STORAGE" />
```

```kotlin
val file = FileUtils() // optional
val saf = SAFUtils(this) // recommended
```

> Note: `SAFUtils` is an inheritance of `FileUtils`, so you can just use the former one.

### Examples

Ask to grant All File Access permission

```kotlin
if (saf.isGrantedExternalStorageAccess()) {
    // Do stuff here if permission is granted
} else saf.requestAllFileAccess()
```

Set permanent access

```kotlin
override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent) {
    super.onActivityResult(requestCode, resultCode, data)
    saf.setPermanentAccess(data)
}
```

Select a file and display the real path of the uri.

```kotlin
// Kotlin
val intent = saf.intentOpenDocument
saf.registerActivityResultLauncher(this) { uri ->
    textview.text = uri.toRealFilePath().toString()
}.launch(intent)
```

```java
// Java
Intent intent = saf.getIntentOpenDocument();
saf.registerActivityResultLauncher(this, uri -> {
    textview.setText(FileExtKt.toRealFilePath(uri).toString());
    return null;
}).launch(intent);
```

> Note: if you want to select a folder/directory instead of a file, change them as follows:
> `intentOpenDocument` -> `intentOpenDocumentTree`
> `toRealFilePath()` -> `toRealFilePathFromDocumentTree()`

# Compose Modules

Only for Kotlin Jetpack Compose and Java is restricted.

- compose-common

## compose-common

### Examples

Get and use the colorPrimary compose color.

```kotlin
@Composable
fun App() {
    Text(text = "Hello World!", color = colorPrimary)
}
```

# Licences

WhaleUtils has lots of utility codes provided, aiming at Android Development and Jetpack Compose.

```
MIT License

Copyright (c) 2023 BlueWhaleYT

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```